var socket=io();window.onload=function(){"use strict";function e(){clearInterval(t),o=!1,c=0,n=null,l.won.dataset.duelsWon=0,l.lost.dataset.duelsLost=0,l.update(),r.word.value="",r.word.className="",r.code.value="",i.set(i.game,"Getting Ready")}var o,t,n,a={space:32,enter:13},c=0,s=document.querySelectorAll(".frame-block"),d={home:0,host:1,join:2,opponentLeft:3,game:4,dc:5,switchTo:function(e){for(var o=0;o<s.length;o++)s[o].style.display="none";s[e].style.display="block"}},m={frameHomeHost:document.getElementById("frameHomeHost"),frameHomeJoin:document.getElementById("frameHomeJoin"),frameJoinEnter:document.getElementById("frameJoinEnter"),frameOpponentLeftGoHome:document.getElementById("frameOpponentLeftGoHome")},r={word:document.getElementById("player__word"),code:document.getElementById("frameJoinCode")},l={lost:document.getElementById("player--top-score"),won:document.getElementById("player--bottom-score"),update:function(){l.won.innerHTML="Won "+l.won.dataset.duelsWon+" duels!",l.lost.innerHTML="Won "+l.lost.dataset.duelsLost+" duels!"}},i={game:document.getElementById("game__message"),code:document.getElementById("frameHostCode"),set:function(e,o){e.innerHTML=o}};m.frameHomeHost.onclick=function(){var e=randomCode(5,"#aA");i.set(i.code,e),socket.emit("joinRoom",e),d.switchTo(d.host)},m.frameHomeJoin.onclick=function(){d.switchTo(d.join)},m.frameJoinEnter.onclick=function(){var e=r.code.value;return 0==e.length?void alert("Please enter code"):void socket.emit("joinRoom",e)},socket.on("roomReady",function(){d.switchTo(d.game)}),socket.on("opponentDisconnected",function(){e(),socket.emit("leaveRoom"),d.switchTo(d.opponentLeft)}),m.frameOpponentLeftGoHome.onclick=function(){d.switchTo(d.home)},socket.on("gameStart",function(e,a){n=a,o=!1,c++,r.word.className="",r.word.focus();var s=7;t=setInterval(function(){s--,5>s&&s>0?i.set(i.game,s):0===s&&(i.set(i.game,a),o=!o,clearInterval(t))},e)}),document.onkeyup=function(e){e=e||window.event,o&&e.keyCode==a.enter&&r.word.value.trim().length>0&&(n===r.word.value?(r.word.className="",socket.emit("gameShoot",c,r.word.value),o=!o):r.word.className="player__word--error")},socket.on("roundWinner",function(e){e?i.set(i.game,"You Won!"):i.set(i.game,"You Lost!"),e?l.won.dataset.duelsWon++:l.lost.dataset.duelsLost++,r.word.value="",l.update()}),socket.on("disconnect",function(){d.switchTo(d.dc),e()}),socket.on("connect",function(){d.switchTo(d.home)})};