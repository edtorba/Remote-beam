var socket=io();window.onload=function(){"use strict";var e,o,t={space:32,enter:13},n=-1,s=document.querySelectorAll(".frame-block"),a={home:0,host:1,join:2,dc:3,game:4,switchTo:function(e){for(var o=0;o<s.length;o++)s[o].style.display="none";s[e].style.display="block"}},m={frameHomeHost:document.getElementById("frameHomeHost"),frameHomeJoin:document.getElementById("frameHomeJoin"),frameJoinEnter:document.getElementById("frameJoinEnter"),frameDcGoHome:document.getElementById("frameDcGoHome")},c={lost:document.getElementById("player__top--score"),won:document.getElementById("player__bottom--score"),update:function(){c.won.innerHTML="Won "+c.won.dataset.duelsWon+" duels!",c.lost.innerHTML="Won "+c.lost.dataset.duelsLost+" duels!"}},d={message:document.getElementById("game__message"),shoot:document.getElementById("game__messageShoot")};m.frameHomeHost.onclick=function(){var e=randomCode(8,"#aA");document.getElementById("frameHostCode").innerHTML=e,socket.emit("joinRoom",e),a.switchTo(a.host)},m.frameHomeJoin.onclick=function(){a.switchTo(a.join)},m.frameJoinEnter.onclick=function(){var e=document.getElementById("frameJoinCode").value;return 0==e.length?void alert("Please enter code"):void socket.emit("joinRoom",e)},socket.on("roomReady",function(){a.switchTo(a.game)}),socket.on("opponentDisconnected",function(){clearInterval(o),e=!1,n=-1,c.won.dataset.duelsWon=0,c.lost.dataset.duelsLost=0,c.update(),d.message.innerHTML="Getting Ready",socket.emit("leaveRoom"),a.switchTo(a.dc)}),m.frameDcGoHome.onclick=function(){a.switchTo(a.home)},socket.on("gameStart",function(t){e=!1;var n=10;o=setInterval(function(){n--,0===n?(d.message.innerHTML="",d.shoot.style.display="block",e=!e):-1===n?(clearInterval(o),d.shoot.style.display="none"):5>n&&n>0&&(d.message.innerHTML=n)},t)}),document.onkeyup=function(o){o=o||window.event,e&&o.keyCode==t.space&&(socket.emit("gameShoot",n),n++,e=!e)},socket.on("roundWinner",function(e){d.message.innerHTML=e?"You Won!":"You Lost!",e?c.won.dataset.duelsWon++:c.lost.dataset.duelsLost++,c.update()})};