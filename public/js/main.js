var socket=io();window.onload=function(){"use strict";var e,o,t,n={space:32,enter:13},a=0,r=document.querySelectorAll(".frame-block"),s={home:0,host:1,join:2,dc:3,game:4,switchTo:function(e){for(var o=0;o<r.length;o++)r[o].style.display="none";r[e].style.display="block"}},m={frameHomeHost:document.getElementById("frameHomeHost"),frameHomeJoin:document.getElementById("frameHomeJoin"),frameJoinEnter:document.getElementById("frameJoinEnter"),frameDcGoHome:document.getElementById("frameDcGoHome")},l={lost:document.getElementById("player__top--score"),won:document.getElementById("player__bottom--score"),update:function(){l.won.innerHTML="Won "+l.won.dataset.duelsWon+" duels!",l.lost.innerHTML="Won "+l.lost.dataset.duelsLost+" duels!"}},d={message:document.getElementById("game__message")},c={playerWord:document.getElementById("player__word")};m.frameHomeHost.onclick=function(){var e=randomCode(8,"#aA");document.getElementById("frameHostCode").innerHTML=e,socket.emit("joinRoom",e),s.switchTo(s.host)},m.frameHomeJoin.onclick=function(){s.switchTo(s.join)},m.frameJoinEnter.onclick=function(){var e=document.getElementById("frameJoinCode").value;return 0==e.length?void alert("Please enter code"):void socket.emit("joinRoom",e)},socket.on("roomReady",function(){s.switchTo(s.game)}),socket.on("opponentDisconnected",function(){clearInterval(o),e=!1,a=0,l.won.dataset.duelsWon=0,l.lost.dataset.duelsLost=0,l.update(),c.playerWord.value="",c.playerWord.className="",d.message.innerHTML="Getting Ready",socket.emit("leaveRoom"),s.switchTo(s.dc)}),m.frameDcGoHome.onclick=function(){s.switchTo(s.home)},socket.on("gameStart",function(n,r){t=r,e=!1,a++,c.playerWord.className="";var s=7;o=setInterval(function(){s--,5>s&&s>0?d.message.innerHTML=s:0===s&&(d.message.innerHTML=r,e=!e,clearInterval(o))},n)}),document.onkeyup=function(o){o=o||window.event,e&&o.keyCode==n.enter&&c.playerWord.value.trim().length>0&&(t===c.playerWord.value?(c.playerWord.className="",socket.emit("gameShoot",a,c.playerWord.value),e=!e):c.playerWord.className="player__word--error")},socket.on("roundWinner",function(e){d.message.innerHTML=e?"You Won!":"You Lost!",e?l.won.dataset.duelsWon++:l.lost.dataset.duelsLost++,c.playerWord.value="",l.update()})};